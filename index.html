<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Entradas para Blogger</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        button:hover:not(:disabled) {
            background-color: #45a049;
        }
        #authStatus {
            margin-top: 20px;
            padding: 10px;
            border-radius: 4px;
        }
        .success { background-color: #dff0d8; color: #3c763d; }
        .error { background-color: #f2dede; color: #a94442; }
        .loading { background-color: #d9edf7; color: #31708f; }
    </style>
    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>
</head>
<body>
    <div class="container">
        <h2>Generador de Entradas para Blogger</h2>
        <div id="authButton"></div>
        <div id="authStatus"></div>

        <label for="postId">ID de la entrada de Blogger (opcional):</label>
        <input type="text" id="postId" placeholder="Ingresa el ID de la entrada para editar">
        <button id="loadPostButton" onclick="loadPost()">Cargar Entrada</button>

        <label for="tituloPrincipal">Título Principal:</label>
        <input type="text" id="tituloPrincipal" placeholder="Ej. [Sub Español] Título del Anime">

        <label for="tituloAlternativo">Título Alternativo:</label>
        <input type="text" id="tituloAlternativo" placeholder="Ej. Título en japonés o alternativo">

        <label for="sinopsis">Sinopsis:</label>
        <textarea id="sinopsis" rows="5" placeholder="Descripción del anime..."></textarea>

        <label for="estudio">Estudio:</label>
        <input type="text" id="estudio" placeholder="Ej. Studio Ghibli">

        <label for="temporada">Temporada:</label>
        <input type="text" id="temporada" placeholder="Ej. Primavera 2023">

        <label for="enlace720p">Enlace 720p:</label>
        <input type="text" id="enlace720p" placeholder="URL del enlace 720p">

        <label for="enlace1080p">Enlace 1080p:</label>
        <input type="text" id="enlace1080p" placeholder="URL del enlace 1080p">

        <label for="etiquetas">Etiquetas (separadas por comas):</label>
        <input type="text" id="etiquetas" placeholder="Ej. anime, sub español, acción">

        <button id="publishButton" onclick="publishPost()" disabled>Publicar en Blogger</button>
    </div>

    <script>
        const CLIENT_ID = '879567119064-pglj8dsqnka2sfpgh6hu50b723f1viia.apps.googleusercontent.com';
        const API_KEY = 'AIzaSyB-DM3G0Y8xTqXKOI5jX0bF4G8hL6e0mZQ';
        const DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/blogger/v3/rest"];
        const SCOPES = 'https://www.googleapis.com/auth/blogger';
        const BLOG_ID = '3321190454875664092';

        let tokenClient;
        let accessToken = null;

        function updateAuthStatus(message, className) {
            const statusDiv = document.getElementById('authStatus');
            statusDiv.textContent = message;
            statusDiv.className = className;
        }

        function initializeAuth() {
            console.log('Documento cargado, inicializando autenticación...');
            try {
                tokenClient = google.accounts.oauth2.initTokenClient({
                    client_id: CLIENT_ID,
                    scope: SCOPES,
                    callback: (response) => {
                        if (response.error) {
                            console.error('Error en la autenticación:', response.error, response.error_description);
                            updateAuthStatus('Error en la autenticación: ' + response.error_description, 'error');
                            return;
                        }
                        accessToken = response.access_token;
                        console.log('Autenticado con éxito, token:', accessToken);
                        updateAuthStatus('Autenticado con éxito', 'success');
                        document.getElementById('publishButton').disabled = false;
                        gapi.client.setToken({ access_token: accessToken });
                    }
                });

                const buttonDiv = document.getElementById('authButton');
                buttonDiv.innerHTML = '<div id="g_id_onload" ' +
                    'data-client_id="' + CLIENT_ID + '" ' +
                    'data-callback="handleCredentialResponse"></div>' +
                    '<div class="g_id_signin" data-type="standard" data-size="large" ' +
                    'data-theme="outline" data-text="sign_in_with" data-shape="rectangular" ' +
                    'data-logo_alignment="left"></div>';

                console.log('Botón de autenticación renderizado');
            } catch (error) {
                console.error('Error al inicializar la autenticación:', error);
                updateAuthStatus('Error al inicializar la autenticación', 'error');
            }
        }

        function handleCredentialResponse(response) {
            console.log('Respuesta de credenciales recibida:', response);
            tokenClient.requestAccessToken();
        }

        function loadPost() {
            const postId = document.getElementById('postId').value;
            if (!postId) {
                updateAuthStatus('Por favor, ingresa un ID de entrada válido', 'error');
                return;
            }
            if (!accessToken) {
                updateAuthStatus('Por favor, inicia sesión primero', 'error');
                return;
            }

            updateAuthStatus('Cargando entrada...', 'loading');
            gapi.client.blogger.posts.get({
                blogId: BLOG_ID,
                postId: postId
            }).then(response => {
                const post = response.result;
                console.log('Entrada cargada:', post);
                console.log('Contenido de la entrada:', post.content);
                updateAuthStatus('Entrada cargada con éxito', 'success');

                const
