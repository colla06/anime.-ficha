<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de Ficha Anime Editable con TMDB API</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f8f8f8; }
    h1 { text-align: center; }
    form { max-width: 900px; margin: 0 auto 2rem; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 0 8px #ccc; }
    label { display: block; margin-top: 12px; font-weight: bold; }
    input[type=text], select, textarea { width: 100%; padding: 6px; margin-top: 4px; box-sizing: border-box; }
    select[multiple] { height: 100px; }
    .small-input { max-width: 150px; }
    button { margin-top: 20px; padding: 10px 16px; font-size: 16px; cursor: pointer; background: #0066cc; color: white; border: none; border-radius: 4px; }
    button:hover { background: #004999; }
    #htmlOutput { white-space: pre-wrap; background: #222; color: #eee; padding: 10px; border-radius: 6px; overflow-x: auto; max-height: 500px; }
    .preview-container { max-width: 900px; margin: 0 auto; background: white; padding: 15px; border-radius: 8px; box-shadow: 0 0 8px #ccc; }
    .note { font-size: 0.9rem; color: #555; margin-top: -10px; }
    .search-container { display: flex; gap: 10px; align-items: center; }
    #searchStatus { color: #555; margin-top: 10px; }
    #resultsList { margin-top: 10px; max-height: 150px; overflow-y: auto; border: 1px solid #ccc; padding: 5px; }
    #resultsList div { cursor: pointer; padding: 5px; }
    #resultsList div:hover { background: #f0f0f0; }
  </style>
</head>
<body>

<h1>Generador de Ficha Anime Editable con TMDB API</h1>

<form id="animeForm">
  <!-- Campo para buscar por título de anime -->
  <label for="animeSearch">Buscar anime por título</label>
  <div class="search-container">
    <input type="text" id="animeSearch" placeholder="Ingresa el título del anime (ej. Naruto)" />
    <button type="button" id="searchBtn">Buscar Anime</button>
  </div>
  <div id="searchStatus"></div>
  <div id="resultsList"></div>

  <label for="animeTitleMain">Título principal</label>
  <input type="text" id="animeTitleMain" required value="Chi.: Chikyuu no Undou ni Tsuite" />

  <label for="animeTitleAlt">Título alternativo</label>
  <input type="text" id="animeTitleAlt" required value="チ。―地球の運動について―" />

  <label for="coverUrl">URL de la portada (imagen)</label>
  <input type="text" id="coverUrl" required value="https://i.ibb.co/s9z7pf1/Chi-Chikyuu-no-Undou-ni-Tsuite.webp" />

  <label for="studios">Estudio(s)</label>
  <input type="text" id="studios" required value="Madhouse" />

  <label for="myAnimeListUrl">URL de MyAnimeList</label>
  <input type="text" id="myAnimeListUrl" value="https://myanimelist.net/anime/52215/Chi__Chikyuu_no_Undou_ni_Tsuite" />

  <label for="animeListUrl">URL de AniList</label>
  <input type="text" id="animeListUrl" value="https://anilist.co/anime/151514/Chi-Chikyuu-no-Undou-ni-Tsuite/" />

  <label for="synopsis">Sinopsis</label>
  <textarea id="synopsis" rows="5" required>Polonia del siglo XV, una época en la que las ideas heréticas conducían a quemar en la hoguera a quienes poseían esa mentalidad. Rafał, un niño prodigio, debía especializarse en teología en la universidad, la materia más importante en aquella época. Sin embargo, un día conoce a un hombre misterioso y comienza a investigar una posible "verdad" entre las ideas heréticas.</textarea>

  <label for="estado">Estado</label>
  <select id="estado" required>
    <option value="Finalizado" selected>Finalizado</option>
    <option value="En emisión">En emisión</option>
  </select>

  <label for="duracion">Duración</label>
  <input type="text" id="duracion" required value="24min" />

  <label for="temporadaEstacion">Temporada (estación)</label>
  <select id="temporadaEstacion" required>
    <option value="Invierno">Invierno</option>
    <option value="Primavera">Primavera</option>
    <option value="Verano">Verano</option>
    <option value="Otoño" selected>Otoño</option>
  </select>

  <label for="temporadaAnio">Temporada (año)</label>
  <input type="number" id="temporadaAnio" required min="2000" max="2100" value="2024" />

  <label for="tipo">Tipo</label>
  <select id="tipo" required>
    <option value="WEBrip" selected>WEBrip</option>
    <option value="BD">BD</option>
  </select>

  <label for="episodios">Episodios (ej. 06/25)</label>
  <input type="text" id="episodios" required value="06/25" />

  <label><strong>Datos 720p HDL</strong></label>

  <label for="fansub720">Fansub</label>
  <input type="text" id="fansub720" value="Ninguno (Subs de NF)[Edit NatsuZangetsu]" />

  <label for="subtitulos720">Subtítulos (Español España o Latino)</label>
  <input type="text" id="subtitulos720" value="Español Neutro" />

  <label for="idioma720">Idioma (Audio) (Selecciona múltiples con Ctrl o Cmd)</label>
  <select id="idioma720" multiple size="3">
    <option value="Japonés" selected>Japonés</option>
    <option value="Latino">Latino</option>
    <option value="Castellano">Castellano</option>
  </select>

  <label for="encoder720">Encoder</label>
  <input type="text" id="encoder720" value="NatsuZangetsu27" />

  <label for="formato720">Formato (siempre MP4 (x264))</label>
  <input type="text" id="formato720" readonly value="MP4 (x264)" />

  <label for="resolucion720">Resolución (siempre 1280x720)</label>
  <input type="text" id="resolucion720" readonly value="1280x720" />

  <label for="comprimido720">Comprimido</label>
  <select id="comprimido720">
    <option value="Sí" selected>Sí</option>
    <option value="No">No</option>
  </select>

  <label for="calidad720">Calidad (siempre Muy buena)</label>
  <input type="text" id="calidad720" readonly value="Muy buena" />

  <label for="tamano720">Tamaño por archivo</label>
  <input type="text" id="tamano720" value="132MB" />

  <label for="servidores720">Servidores (selección múltiple)</label>
  <select id="servidores720" multiple size="5">
    <option value="Mega" selected>Mega</option>
    <option value="MediaFire" selected>MediaFire</option>
    <option value="Google Drive">Google Drive</option>
    <option value="TeraBox">TeraBox</option>
    <option value="Index">Index</option>
  </select>

  <label for="uploader720">Uploader</label>
  <input type="text" id="uploader720" value="NatsuZangetsu27" />

  <hr />

  <label><strong>Datos 1080p FHD</strong></label>

  <label for="fansub1080">Fansub</label>
  <input type="text" id="fansub1080" value="Ninguno (Subs de NF)[Edit NatsuZangetsu]" />

  <label for="subtitulos1080">Subtítulos (Español España o Latino)</label>
  <input type="text" id="subtitulos1080" value="Español" />

  <label for="idioma1080">Idioma (Audio) (Selecciona múltiples con Ctrl o Cmd)</label>
  <select id="idioma1080" multiple size="3">
    <option value="Japonés" selected>Japonés</option>
    <option value="Latino">Latino</option>
    <option value="Castellano">Castellano</option>
  </select>

  <label for="ripper1080">Ripper</label>
  <input type="text" id="ripper1080" value="VARYG" />

  <label for="rawEncode1080">Raw/Encode</label>
  <input type="text" id="rawEncode1080" value="DKBTeam" />

  <label for="muxeo1080">Muxeo</label>
  <input type="text" id="muxeo1080" value="NatsuZangetsu27" />

  <label for="formato1080">Formato</label>
  <select id="formato1080" required>
    <option value="MKV (x265)" selected>MKV (x265)</option>
    <option value="MP4 (x264)">MP4 (x264)</option>
    <option value="MKV (x264)">MKV (x264)</option>
  </select>

  <label for="resolucion1080">Resolución (siempre 1920x1080)</label>
  <input type="text" id="resolucion1080" readonly value="1920x1080" />

  <label for="comprimido1080">Comprimido</label>
  <select id="comprimido1080">
    <option value="Sí" selected>Sí</option>
    <option value="No">No</option>
  </select>

  <label for="calidad1080">Calidad (siempre Excelente)</label>
  <input type="text" id="calidad1080" readonly value="Excelente" />

  <label for="tamano1080">Tamaño por archivo</label>
  <input type="text" id="tamano1080" value="220MB aprox~" />

  <label for="servidores1080">Servidores (selección múltiple)</label>
  <select id="servidores1080" multiple size="5">
    <option value="Index">Index</option>
    <option value="Mega">Mega</option>
    <option value="Google Drive">Google Drive</option>
    <option value="TeraBox" selected>TeraBox</option>
    <option value="MediaFire">MediaFire</option>
  </select>

  <label for="uploader1080">Uploader</label>
  <select id="uploader1080">
    <option value="Colla">Colla</option>
    <option value="NatsuZangetsu27" selected>NatsuZangetsu27</option>
    <option value="AnimeySeriesdo">AnimeySeriesdo</option>
    <option value="Nookcir DOM">Nookcir DOM</option>
  </select>

  <button type="button" id="generateBtn">Generar Código HTML</button>
</form>

<h2 style="text-align:center;">Código HTML Generado (cópialo y pégalo en Blogger)</h2>
<pre id="htmlOutput"></pre>

<h2 style="text-align:center;">Vista Previa</h2>
<div class="preview-container" id="preview"></div>

<script>
// Credenciales de TMDB API
const TMDB_API_KEY = '6ed0d33dd81770a03df2ef095099913e';
const TMDB_TOKEN = 'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI2ZWQwZDMzZGQ4MTc3MGEwM2RmMmVmMDk1MDk5OTEzZSIsIm5iZiI6MTU5OTk5NzYyNS4xNzEsInN1YiI6IjVmNWUwNmI5N2Q0MWFhMDAzNmVjMDkyMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.8OF68EFzuiSjFToKO3DowyTI7De2JDiCSYTHqGYIdRk';

// Función para unir elementos con guion
function joinWithDash(arr) {
  return arr.length ? arr.join(' - ') : '';
}

// Función para unir elementos con coma
function joinWithComa(arr) {
  return arr.length ? arr.join(', ') : '';
}

// Función para escapar caracteres HTML
function escapeHtml(text) {
  const map = {
    '&': '&',
    '<': '<',
    '>': '>',
    '"': '"',
    "'": '''
  };
  return text.replace(/[&<>"']/g, function(m) { return map[m]; });
}

// Función para obtener opciones seleccionadas de un select
function getSelectedOptions(select) {
  return Array.from(select.options).filter(o => o.selected).map(o => o.value);
}

// Función para buscar anime en TMDB
document.getElementById('searchBtn').onclick = async function() {
  const animeSearch = document.getElementById('animeSearch').value.trim();
  const statusElement = document.getElementById('searchStatus');
  const resultsList = document.getElementById('resultsList');

  if (!animeSearch) {
    statusElement.textContent = 'Por favor, ingresa un título de anime.';
    statusElement.style.color = 'red';
    resultsList.innerHTML = '';
    return;
  }

  statusElement.textContent = 'Buscando anime...';
  statusElement.style.color = '#555';
  resultsList.innerHTML = '';

  try {
    // Buscar anime con la palabra clave "anime" (ID: 210024)
    const response = await fetch(`https://api.themoviedb.org/3/search/tv?api_key=${TMDB_API_KEY}&language=es-ES&query=${encodeURIComponent(animeSearch)}&with_keywords=210024`, {
      headers: {
        'Authorization': `Bearer ${TMDB_TOKEN}`
      }
    });
    if (!response.ok) throw new Error('Error al buscar el anime');
    const data = await response.json();
    const results = data.results;

    if (results.length === 0) {
      statusElement.textContent = 'No se encontraron animes con ese título.';
      statusElement.style.color = 'red';
      return;
    }

    // Mostrar lista de resultados
    resultsList.innerHTML = results.map(show => `
      <div data-id="${show.id}">${show.name} (${show.first_air_date ? show.first_air_date.slice(0, 4) : 'Sin fecha'})</div>
    `).join('');

    // Añadir evento de clic a cada resultado
    resultsList.querySelectorAll('div').forEach(item => {
      item.addEventListener('click', async () => {
        const animeId = item.getAttribute('data-id');
        statusElement.textContent = 'Cargando datos del anime...';
        resultsList.innerHTML = '';

        try {
          // Obtener detalles del anime
          const detailsResponse = await fetch(`https://api.themoviedb.org/3/tv/${animeId}?api_key=${TMDB_API_KEY}&language=es-ES`, {
            headers: {
              'Authorization': `Bearer ${TMDB_TOKEN}`
            }
          });
          if (!detailsResponse.ok) throw new Error('Anime no encontrado');
          const anime = await detailsResponse.json();

          // Obtener compañías de producción (estudios)
          const companiesResponse = await fetch(`https://api.themoviedb.org/3/tv/${animeId}/credits?api_key=${TMDB_API_KEY}&language=es-ES`, {
            headers: {
              'Authorization': `Bearer ${TMDB_TOKEN}`
            }
          });
          const companiesData = await companiesResponse.json();
          const studios = companiesData.production_companies?.map(c => c.name).join(', ') || 'Desconocido';

          // Mapeo de datos de TMDB a los campos del formulario
          document.getElementById('animeTitleMain').value = anime.name || '';
          document.getElementById('animeTitleAlt').value = anime.original_name || '';
          document.getElementById('coverUrl').value = anime.poster_path ? `https://image.tmdb.org/t/p/w500${anime.poster_path}` : '';
          document.getElementById('studios').value = studios;
          document.getElementById('synopsis').value = anime.overview || 'Sin sinopsis disponible en español. Por favor, ingrésala manualmente.';
          
          // Mapeo de estado
          const estadoMap = {
            'Ended': 'Finalizado',
            'Returning Series': 'En emisión',
            'Canceled': 'Finalizado',
            'In Production': 'En emisión'
          };
          document.getElementById('estado').value = estadoMap[anime.status] || 'En emisión';

          // Duración (TMDB no siempre proporciona duración por episodio, usar valor aproximado)
          document.getElementById('duracion').value = anime.episode_run_time && anime.episode_run_time.length > 0 ? `${anime.episode_run_time[0]}min` : '';

          // Temporada
          const temporadaMap = {
            '01': 'Invierno', '02': 'Invierno', '03': 'Primavera',
            '04': 'Primavera', '05': 'Primavera', '06': 'Verano',
            '07': 'Verano', '08': 'Verano', '09': 'Otoño',
            '10': 'Otoño', '11': 'Otoño', '12': 'Invierno'
          };
          const firstAirDate = anime.first_air_date ? new Date(anime.first_air_date) : null;
          document.getElementById('temporadaEstacion').value = firstAirDate ? temporadaMap[firstAirDate.getMonth() + 1] || 'Otoño' : 'Otoño';
          document.getElementById('temporadaAnio').value = firstAirDate ? firstAirDate.getFullYear() : new Date().getFullYear();

          // Episodios
          document.getElementById('episodios').value = anime.number_of_episodes ? `01/${anime.number_of_episodes}` : '';

          statusElement.textContent = 'Datos del anime cargados correctamente.';
          statusElement.style.color = 'green';
        } catch (error) {
          statusElement.textContent = 'Error al cargar los datos: ' + error.message;
          statusElement.style.color = 'red';
        }
      });
    });

    statusElement.textContent = 'Selecciona un anime de la lista.';
    statusElement.style.color = '#555';
  } catch (error) {
    statusElement.textContent = 'Error al buscar el anime: ' + error.message;
    statusElement.style.color = 'red';
  }
};

// Función para generar el código HTML
document.getElementById('generateBtn').onclick = function() {
  // Obtener valores del formulario
  const titleMain = escapeHtml(document.getElementById('animeTitleMain').value.trim());
  const titleAlt = escapeHtml(document.getElementById('animeTitleAlt').value.trim());
  const coverUrl = escapeHtml(document.getElementById('coverUrl').value.trim());
  const studios = escapeHtml(document.getElementById('studios').value.trim());
  const myAnimeListUrl = escapeHtml(document.getElementById('myAnimeListUrl').value.trim());
  const animeListUrl = escapeHtml(document.getElementById('animeListUrl').value.trim());
  const synopsis = escapeHtml(document.getElementById('synopsis').value.trim());
  const estado = escapeHtml(document.getElementById('estado').value);
  const duracion = escapeHtml(document.getElementById('duracion').value.trim());
  const temporadaEstacion = escapeHtml(document.getElementById('temporadaEstacion').value);
  const temporadaAnio = escapeHtml(document.getElementById('temporadaAnio').value);
  const tipo = escapeHtml(document.getElementById('tipo').value);
  const episodios = escapeHtml(document.getElementById('episodios').value.trim());

  // Datos 720p
  const fansub720 = escapeHtml(document.getElementById('fansub720').value.trim());
  const subtitulos720 = escapeHtml(document.getElementById('subtitulos720').value.trim());
  const idioma720 = getSelectedOptions(document.getElementById('idioma720')).join(', ');
  const encoder720 = escapeHtml(document.getElementById('encoder720').value.trim());
  const formato720 = escapeHtml(document.getElementById('formato720').value);
  const resolucion720 = escapeHtml(document.getElementById('resolucion720').value);
  const comprimido720 = escapeHtml(document.getElementById('comprimido720').value);
  const calidad720 = escapeHtml(document.getElementById('calidad720').value);
  const tamano720 = escapeHtml(document.getElementById('tamano720').value.trim());
  const servidores720 = getSelectedOptions(document.getElementById('servidores720'));
  const uploader720 = escapeHtml(document.getElementById('uploader720').value.trim());

  // Datos 1080p
  const fansub1080 = escapeHtml(document.getElementById('fansub1080').value.trim());
  const subtitulos1080 = escapeHtml(document.getElementById('subtitulos1080').value.trim());
  const idioma1080 = getSelectedOptions(document.getElementById('idioma1080')).join(', ');
  const ripper1080 = escapeHtml(document.getElementById('ripper1080').value.trim());
  const rawEncode1080 = escapeHtml(document.getElementById('rawEncode1080').value.trim());
  const muxeo1080 = escapeHtml(document.getElementById('muxeo1080').value.trim());
  const formato1080 = escapeHtml(document.getElementById('formato1080').value);
  const resolucion1080 = escapeHtml(document.getElementById('resolucion1080').value);
  const comprimido1080 = escapeHtml(document.getElementById('comprimido1080').value);
  const calidad1080 = escapeHtml(document.getElementById('calidad1080').value);
  const tamano1080 = escapeHtml(document.getElementById('tamano1080').value.trim());
  const servidores1080 = getSelectedOptions(document.getElementById('servidores1080'));
  const uploader1080 = escapeHtml(document.getElementById('uploader1080').value);

  // Construir servidores con guiones
  const servidores720Str = joinWithDash(servidores720);
  const servidores1080Str = joinWithDash(servidores1080);

  // Generar el código HTML
  const html = `
<main class="anime-main">
  <section>
    <div class="notes">
      <p>[Descarga] ${titleMain}: HDL MP4 - FHD MKV</p>
    </div>
  </section>
  <section class="anime-info">
    <div class="anime-info__cover">
      <img src="${coverUrl}" alt="Portada de ${titleMain}">
    </div>
    <div class="anime-info__content">
      <div class="content__titles">
        <p class="titles--main">${titleMain}</p>
        <p class="titles--alt">${titleAlt}</p>
      </div>
      <div class="content__misc">
        <div class="misc__studios">
          <span>${studios}</span>
        </div>
        <div class="misc__links">
          <a href="${myAnimeListUrl}" target="_blank">MyAnimeList</a>
          <a href="${animeListUrl}" target="_blank">AniList</a>
        </div>
      </div>
      <div class="content__synopsis">
        <h2 class="synopsis__title">SINOPSIS</h2>
        <p class="synopsis__content">${synopsis}</p>
        <!--more-->
      </div>
    </div>
  </section>
  <div class="content__details">
    <div class="airing-status">
      <span><b>ESTADO:</b></span> ${estado}
      <br>
    </div>
    <span id="duration">
      <svg class="i i-clock" viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 7v5l3 3"></path>
      </svg>
      Duración:<br>${duracion}
    </span>
    <span class="season">
      <svg class="i i-calendar" viewBox="0 0 24 24">
        <rect width="18" height="17" x="3" y="5" rx="2"></rect>
        <path d="M7 2v3m10-3v3M3 10h18"></path>
      </svg>
      Temporada:<br><a href="/search/label/${temporadaAnio}%20${temporadaEstacion}">${temporadaEstacion} ${temporadaAnio}</a>
    </span>
    <span id="format">
      <svg class="i i-tv-retro" viewBox="0 0 24 24">
        <rect width="20" height="15" x="2" y="7" rx="3"></rect>
        <path d="m7 2 5 5 5-5"></path>
      </svg>
      Tipo:<br>${tipo}
    </span>
    <span class="">
      <svg class="i i-list" viewBox="0 0 24 24">
        <path d="M7 6h14M7 12h14M7 18h14M3 6h0m0 6h0m0 6h0"></path>
      </svg>
      Episodios:<br><b>${episodios}</b>
    </span>
  </div>
  <section class="anime-related"></section>
  <!-- Contraseña -->
  <div style="text-align: center;">
    <b><u>Contraseña:</u></b> 
    <span id="enlace">animeyseriesdo</span>
    <button id="copiador" onclick="navigator.clipboard.writeText('animeyseriesdo')">Copiar <i aria-hidden="true" class="fa fa-files-o"></i></button>
  </div>
  <!-- Fin Contraseña -->

  <section class="tabs-custom">
    <div class="tab__btns">
      <button type="button" class="tab__btn" onclick="showPanel(0)">720p HDL</button>
      <button type="button" class="tab__btn" onclick="showPanel(1)">1080p FHD</button>
    </div>
    <div class="tab__panels">
      <div class="tab__panel" style="display:block;">
        <table class="tab-custom-table">
          <tr><th>Fansub:</th><td>${fansub720}</td></tr>
          <tr><th>Subtítulos:</th><td>${subtitulos720}</td></tr>
          <tr><th>Idioma (Audio):</th><td>${idioma720}</td></tr>
          <tr><th>Encoder:</th><td>${encoder720}</td></tr>
          <tr><th>Formato:</th><td>${formato720}</td></tr>
          <tr><th>Resolución:</th><td>${resolucion720}</td></tr>
          <tr><th>Comprimido:</th><td>${comprimido720}</td></tr>
          <tr><th>Calidad:</th><td>${calidad720}</td></tr>
          <tr><th>Tamaño por archivo:</th><td>${tamano720}</td></tr>
          <tr><th>Servidores:</th><td>${servidores720Str}</td></tr>
          <tr><th>Uploader:</th><td>${uploader720}</td></tr>
        </table>
        <div class="custom-detail">
          <button class="custom-detail__btn" onclick="toggleDetails(this)">Mostrar enlaces: HDL</button>
          <div class="custom-detail__panel" style="display:none;">
            <!-- Aquí puedes agregar enlaces si deseas -->
          </div>
        </div>
      </div>
      <div class="tab__panel" style="display:none;">
        <table class="tab-custom-table">
          <tr><th>Fansub:</th><td>${fansub1080}</td></tr>
          <tr><th>Subtítulos:</th><td>${subtitulos1080}</td></tr>
          <tr><th>Idioma:</th><td>${idioma1080}</td></tr>
          <tr><th>Ripper:</th><td>${ripper1080}</td></tr>
          <tr><th>Raw/Encode:</th><td>${rawEncode1080}</td></tr>
          <tr><th>Muxeo:</th><td>${muxeo1080}</td></tr>
          <tr><th>Formato:</th><td>${formato1080}</td></tr>
          <tr><th>Resolución:</th><td>${resolucion1080}</td></tr>
          <tr><th>Comprimido:</th><td>${comprimido1080}</td></tr>
          <tr><th>Calidad:</th><td>${calidad1080}</td></tr>
          <tr><th>Tamaño por archivo:</th><td>${tamano1080}</td></tr>
          <tr><th>Servidores:</th><td>${servidores1080Str}</td></tr>
          <tr><th>Uploader:</th><td>${uploader1080}</td></tr>
        </table>
        <div class="custom-detail">
          <button class="custom-detail__btn" onclick="toggleDetails(this)">Mostrar enlaces: FHD</button>
          <div class="custom-detail__panel" style="display:none;">
            <!-- Aquí puedes agregar enlaces si deseas -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <div class="nextEpi">
    <span><i aria-hidden="true" class="fa fa-info-circle"></i> <b>Para reportar problemas con la descarga, usa los comentarios.</b></span>
  </div>
  <div style="text-align: center;"><b>¡NO OLVIDES DEJAR UN COMENTARIO!</b></div>

  <section>
    <div class="anime-tags">
      <span><a href="/search/label/drama">Drama</a></span>
      <span><a href="/search/label/histórico">Histórico</a></span>
    </div>
  </section>
</main>
`.trim();

  // Mostrar el código HTML generado
  document.getElementById('htmlOutput').textContent = html;
  // Mostrar la vista previa
  document.getElementById('preview').innerHTML = html;
  // Mostrar la pestaña 720p por defecto
  showPanel(0);
};

// Función para cambiar entre pestañas
function showPanel(index) {
  const panels = document.querySelectorAll('.tab__panel');
  const buttons = document.querySelectorAll('.tab__btn');
  panels.forEach((panel, i) => panel.style.display = (i === index) ? 'block' : 'none');
  buttons.forEach((btn, i) => btn.style.backgroundColor = (i === index) ? '#0066cc' : '#eee');
  buttons.forEach((btn, i) => btn.style.color = (i === index) ? 'white' : 'black');
}

// Función para mostrar u ocultar enlaces
function toggleDetails(btn) {
  const panel = btn.nextElementSibling;
  if (panel.style.display === 'none') {
    panel.style.display = 'block';
    btn.textContent = btn.textContent.replace('Mostrar', 'Ocultar');
  } else {
    panel.style.display = 'none';
    btn.textContent = btn.textContent.replace('Ocultar', 'Mostrar');
  }
}
</script>

</body>
</html>
